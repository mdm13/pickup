<?xml version="1.0" encoding="ISO-8859-1"?>
<Pickup>
	<Versione>
		<Versione>42.31.28</Versione>
		<DataVersione>2018-04-30</DataVersione>
		<OraVersione>1211</OraVersione>
		<DescrizioneVersione>Modifica schede tecniche valori</DescrizioneVersione>
	</Versione>
	<ElencoProcessi>
		<Processo>
			<CodPro>1402</CodPro>
			<Versione>3.2</Versione>
			<DesProcesso>[*DOC]AVP FASE Ore (Digitato)</DesProcesso>
			<DesEstesaProcesso>AVP Fase con scelta operatore; imputazione quantità digitata; controllo presenza operatore</DesEstesaProcesso>
			<CodCategoria>2</CodCategoria>
			<Modulo>2</Modulo>
			<GruppoDocumento>AVP</GruppoDocumento>
			<FirmaUltVarData>2016-07-08</FirmaUltVarData>
			<FirmaUltVarOra>143810</FirmaUltVarOra>
			<FirmaUltVarStazione>CD</FirmaUltVarStazione>
			<FirmaUltVarOperatore>SCP</FirmaUltVarOperatore>
			<StatoOrdineSped>2</StatoOrdineSped>
			<CodiceVariazione>V01</CodiceVariazione>
			<FileImmagine>Omino_04.png</FileImmagine>
			<ElencoAttivita>
				<Attivita>
					<CodPro>1402</CodPro>
					<Attivita>5</Attivita>
					<Des>SELEZIONE RISORSA</Des>
					<CodQuery>831</CodQuery>
					<NomeDFX>ERISPROD</NomeDFX>
					<Query>/*
* Seleziona le risorse evidenziando quelle che sono presenti e disabilitando quelle non presenti
*
*/
SELECT 
RisorseProdutAnag.CodRisorsaProd BCVOUT[RIPRACRISP$],  
RisorseProdutAnag.Des BCVOUT[RIPRADES], 
RisorseProdutAnag.TipoRisorsaProd BCVOUT[RIPRATRIS], 
case when tmp.CodRisorsaProd is null then 0 else 1 end BCVOUT[YPK_STATO],
RisorseProdutAnag.CodRisorsaProd BCVOUT[YPK_BARCODE]

FROM RisorseProdutAnag  
left join  
(SELECT  
RisorseProdutAnag.DBGruppo, 
RisorseProdutAnag.CodRisorsaProd 
FROM RisorseProdutAnag inner join YPKTransazioni on 
RisorseProdutAnag.DBGruppo=YPKTransazioni.DBGruppo  
and RisorseProdutAnag.CodRisorsaProd=YPKTransazioni.CodiceRisorsaProd  
WHERE YPKTransazioni.CodTipTransazione=1  and YPKTransazioni.Stato=0 and 
YPKTransazioni.Cancellata=0
) tmp 
on 
RisorseProdutAnag.DBGruppo=tmp.DBGruppo  
and RisorseProdutAnag.CodRisorsaProd=tmp.CodRisorsaProd  
WHERE RisorseProdutAnag.DBGruppo=BCVIN[GR$] AND  
(TipoRisorsaProd=2 OR TipoRisorsaProd=4) AND 
(RisorseProdutAnag.DataFineValidita=convert(datetime,&apos;01/01/1800&apos;) OR RisorseProdutAnag.DataFineValidita&gt;=GETDATE())</Query>
					<FirmaUltVarData>2016-07-08</FirmaUltVarData>
					<FirmaUltVarOra>143810</FirmaUltVarOra>
					<FirmaUltVarStazione>CD</FirmaUltVarStazione>
					<FirmaUltVarOperatore>SCP</FirmaUltVarOperatore>
					<NomeStruttDinamica>YPK_ERISPROD</NomeStruttDinamica>
					<LabelBottoni>[[RIPRACRISP$]]-[[RIPRADES$]]</LabelBottoni>
					<TitoloVideata>Selezione Operatori</TitoloVideata>
					<TipoAzione>K</TipoAzione>
					<TipoAzioneBarcode>1</TipoAzioneBarcode>
					<CancSelInEntrata>1</CancSelInEntrata>
					<CodiceSelezione>S05</CodiceSelezione>
					<ParametriSelezione>&lt;?xml version=&quot;1.0&quot; encoding=&quot;ISO-8859-1&quot;?&gt;
&lt;Parametri&gt;
	&lt;Operatori&gt;
		&lt;ControlloPresenza&gt;1&lt;/ControlloPresenza&gt;
		&lt;ControlloTransazioniAperte&gt;1&lt;/ControlloTransazioniAperte&gt;
	&lt;/Operatori&gt;
&lt;/Parametri&gt;</ParametriSelezione>
					<CodiceQuery>DB</CodiceQuery>
				</Attivita>
				<Attivita>
					<CodPro>1402</CodPro>
					<Attivita>10</Attivita>
					<Des>FILTRO RIGA FASE</Des>
					<FirmaUltVarData>2016-07-08</FirmaUltVarData>
					<FirmaUltVarOra>143810</FirmaUltVarOra>
					<FirmaUltVarStazione>CD</FirmaUltVarStazione>
					<FirmaUltVarOperatore>SCP</FirmaUltVarOperatore>
					<TipoAttivita>2</TipoAttivita>
					<TitoloVideata>Selezione Fase</TitoloVideata>
					<CodiceInput>P02</CodiceInput>
					<SkipConfInput>1</SkipConfInput>
				</Attivita>
				<Attivita>
					<CodPro>1402</CodPro>
					<Attivita>15</Attivita>
					<Des>DOCUMENTI APERTI</Des>
					<CodQuery>803</CodQuery>
					<NomeDFX>EORPRORF</NomeDFX>
					<Query>SELECT 
OrdProduzRigheFasi.IdDocumento BCVOUT[OPRFIDD], 
OrdProduzRigheFasi.IdRigaDoc BCVOUT[OPRFIDR], 
OrdProduzRigheFasi.IdRigaLavorazione BCVOUT[OPRFIDRF], 
OrdProduzRigheFasi.CodArt BCVOUT[OPRFCART$], 
OrdProduzRigheFasi.CodLavorazione BCVOUT[OPRFTLV$], 
OrdProduzRigheFasi.Um BCVOUT[OPRFUM$], 
OrdProduzRigheFasi.QtaRichiesta BCVOUT[OPRFQT], 
ISNULL((OrdProduzRigheFasi.QtaRichiesta-ESV_QTA_AV_FASE.QuantitaAvanzata),LTRIM(STR(OrdProduzRigheFasi.QtaRichiesta))) BCVOUT[QTA_SAL], 
ESV_CLIFOR_DATIANAG.RagSoc1 BCVOUT[RAG_SOC$] 
FROM DocElencoGen 
INNER JOIN OrdProduzRighe ON OrdProduzRighe.DBGruppo=DocElencoGen.DBGruppo AND OrdProduzRighe.IdDocumento=DocElencoGen.IdDocumento 
LEFT JOIN ESV_CLIFOR_DATIANAG ON DocElencoGen.DBGruppo = ESV_CLIFOR_DATIANAG.DBGruppo AND DocElencoGen.TipoAnagrafica = ESV_CLIFOR_DATIANAG.TipoAnagrafica AND DocElencoGen.CodCliFor = ESV_CLIFOR_DATIANAG.CodCliFor 
LEFT JOIN EORFAQRIGA ON OrdProduzRighe.DBGruppo=EORFAQRIGA.DBGruppo AND OrdProduzRighe.IdDocumento=EORFAQRIGA.IdDocumento AND OrdProduzRighe.IdRiga=EORFAQRIGA.IdRigaDoc 
LEFT JOIN OrdProduzRigheFasi ON OrdProduzRigheFasi.DBGruppo=OrdProduzRighe.DBGruppo AND OrdProduzRigheFasi.IdDocumento=OrdProduzRighe.IdDocumento AND OrdProduzRigheFasi.IdRigaDoc= OrdProduzRighe.IdRiga 
LEFT JOIN ESV_QTA_AV_FASE ON OrdProduzRigheFasi.DBGruppo=ESV_QTA_AV_FASE.DBGruppo AND OrdProduzRigheFasi.IdDocumento=ESV_QTA_AV_FASE.IdDocumento AND OrdProduzRigheFasi.IdRigaDoc=ESV_QTA_AV_FASE.IdRigaDoc AND OrdProduzRigheFasi.IdRigaLavorazione=ESV_QTA_AV_FASE.IdRigaLavorazione 
WHERE DocElencoGen.DBGruppo=BCVIN[GR$] AND OrdProduzRighe.Stato&lt;4 AND OrdProduzRigheFasi.Stato&lt;4 AND EORFAQRIGA.FlussoSaldato=0 AND 
OrdProduzRigheFasi.IdDocumento=cast(substring(BCVIN[[0.YPK_FILTRI.FSTR$]],1,9) as int) AND
OrdProduzRigheFasi.IdRigaDoc=cast(substring(BCVIN[[0.YPK_FILTRI.FSTR$]],10,4) as int)  AND
OrdProduzRigheFasi.IdRigaLavorazione=cast(substring(BCVIN[[0.YPK_FILTRI.FSTR$]],14,4) as int)
ORDER BY OrdProduzRigheFasi.IdDocumento, OrdProduzRigheFasi.IdRigaDoc, OrdProduzRigheFasi.IdRigaLavorazione</Query>
					<FirmaUltVarData>2016-07-08</FirmaUltVarData>
					<FirmaUltVarOra>143810</FirmaUltVarOra>
					<FirmaUltVarStazione>CD</FirmaUltVarStazione>
					<FirmaUltVarOperatore>SCP</FirmaUltVarOperatore>
					<NumeroRigheBottoni>1</NumeroRigheBottoni>
					<NumeroColonneBottoni>1</NumeroColonneBottoni>
					<NomeStruttDinamica>YPK_EORPRORF</NomeStruttDinamica>
					<LabelBottoni>select &apos;[[OPRFUM$]] (&apos;+ 
LTRIM(STR([[OPRFQT]]-isnull( 
(select ESV_QTA_AV_FASE.QuantitaAvanzata
from ESV_QTA_AV_FASE  
where ESV_QTA_AV_FASE.DBGruppo=BCVIN[GR$] 
and ESV_QTA_AV_FASE.IdDocumento=[[OPRFIDD]] 
and ESV_QTA_AV_FASE.IdRigaDoc=[[OPRFIDR]] 
and ESV_QTA_AV_FASE.IdRigaLavorazione=[[OPRFIDRF]]),0)))+&apos;) &apos; +
dbo.pkGetRifOrdProdFase(BCVIN[GR$],[[OPRFIDD]],[[OPRFIDR]],[[OPRFIDRF]])+
&apos;   \n&apos; +
&apos;\n[[OPRFCART$]] - &apos; +
(select OrdProduzRighe.Des  from OrdProduzRighe
where  OrdProduzRighe.DBGruppo=BCVIN[GR$] 
and OrdProduzRighe.IdDocumento=[[OPRFIDD]] 
and OrdProduzRighe.IdRiga=[[OPRFIDR]]) +
&apos;   \n&apos; +
&apos;   \n[[OPRFTLV$]] - [[OPRFDES$]]&apos; +
&apos;   \n&apos; +
&apos;   \n ___________ SPECIFICHE DI LAVORAZIONE ______&apos; +
&apos;   \n[[OPRFNOTA?]]&apos; +
&apos;   \n&apos; +
&apos;   \n _________________ TEMPI PREVISTI ___________&apos; +
&apos;   \n Attrezzaggio ore: [[OPRFTERA]]   Lavorazione ore: [[OPRFTERL]]&apos;</LabelBottoni>
					<TitoloVideata>DOCUMENTI APERTI</TitoloVideata>
					<CancSelInEntrata>1</CancSelInEntrata>
					<CodiceQuery>DB</CodiceQuery>
				</Attivita>
				<Attivita>
					<CodPro>1402</CodPro>
					<Attivita>20</Attivita>
					<SkipBack>1</SkipBack>
					<Des>APERTURA TRANSAZIONI</Des>
					<TipoOperazione2>709</TipoOperazione2>
					<FirmaUltVarData>2016-07-08</FirmaUltVarData>
					<FirmaUltVarOra>143810</FirmaUltVarOra>
					<FirmaUltVarStazione>CD</FirmaUltVarStazione>
					<FirmaUltVarOperatore>SCP</FirmaUltVarOperatore>
					<TipoAttivita>4</TipoAttivita>
					<TipoAzione>K</TipoAzione>
					<GruppoDocumento>AVP</GruppoDocumento>
					<CodTipoDoc>706</CodTipoDoc>
					<CodiceTrans>T01</CodiceTrans>
				</Attivita>
				<Attivita>
					<CodPro>1402</CodPro>
					<Attivita>25</Attivita>
					<Des>VIS. TRANSAZIONI</Des>
					<CodQuery>970</CodQuery>
					<NomeDFX>YPK_TRAN</NomeDFX>
					<Query>SELECT  
IdTransazione BCVOUT[TRAIDD],
CodTipTransazione BCVOUT[TRACODTT],
CodPro BCVOUT[TRACODPR],
Stato BCVOUT[TRASTA],
Esportata BCVOUT[TRAESP],
CodiceExport BCVOUT[TRACODXP],
CartellaExport BCVOUT[TRACARXP],
PrefNomeFileExport BCVOUT[TRAPNMXP],
DaRiavviare BCVOUT[TRADRI],
RisorsaSupporto BCVOUT[TRARSU],
IdLegameInterno BCVOUT[TRAIDRL],
DataApertura BCVOUT[TRADRA&amp;],
OraApertura BCVOUT[TRAORA],
DataChiusura BCVOUT[TRADRC&amp;],
OraChiusura BCVOUT[TRAORC],
OreLavorate BCVOUT[TRAOREL],
CausaleAttivita BCVOUT[TRACAUATT],
CodArt BCVOUT[TRACART],
VarianteArt BCVOUT[TRAVARART],
MaterialeImprevisto BCVOUT[TRAMATIMP],
Quantita BCVOUT[TRAQT],
QtaUmSecondaria BCVOUT[TRAQT2],
QtaScarti1Scelta BCVOUT[TRAQTSCP],
QtaSecScarti1Scelta BCVOUT[TRAQT2SCP],
QtaScarti2Scelta BCVOUT[TRAQTSCS],
QtaSecScarti2Scelta BCVOUT[TRAQT2SCS],
CodMagPrincipale BCVOUT[TRACMAG],
CodAreaMagPrinc BCVOUT[TRACCOM],
CodMagScaricoSec BCVOUT[TRACMAGS],
CodAreaMagSec BCVOUT[TRACCOMS],
CodOpMag BCVOUT[TRACOM],
CodOpMag1 BCVOUT[TRACOM1],
CodMagScarti1Scelta BCVOUT[TRACMAGSCP],
CodAreaScarti1Scelta BCVOUT[TRACCOMSCP],
CodMagScarti2Scelta BCVOUT[TRACMAGSCS],
CodAreaScarti2Scelta BCVOUT[TRACCOMSCS],
CodLineaProduzione BCVOUT[TRACLP],
CodiceRisorsaProd BCVOUT[TRACRISP],
CodLavorazione BCVOUT[TRATLV],
IdDocOrd BCVOUT[TRAIDDOR],
IdRigaOrdProdFinito BCVOUT[TRAIDRORPF],
IdRigaOrdMateriale BCVOUT[TRAIDRORMAT],
IdDocOrdFase BCVOUT[TRAIDDORF],
IdCarrelloTestate BCVOUT[TRAIDDCAR],
TipoDoc BCVOUT[TRATDO],
TipoOpAvanzProd BCVOUT[TRATOPAVP],
TipoOpAvanzProd1 BCVOUT[TRATOPAVP1],
Saldato BCVOUT[TRASAL],
RifLottoPFAlfanum BCVOUT[TRARPAL],
RifLottoPFData BCVOUT[TRARPADL],
RifLottoPFNumero BCVOUT[TRARPANL],
ClasseImputazione BCVOUT[TRACLIMP],
CodImputazione BCVOUT[TRACIMP],
DatiIndTipoOpIndustr BCVOUT[TRATOIND],
DatiIndCodCdA BCVOUT[TRACCOS],
DatiIndCodCommessa BCVOUT[TRACPRO],
DatiIndCodSottocomm BCVOUT[TRACSCOM],
DatiIndCodFase BCVOUT[TRACFASE],
IdCodAttivita BCVOUT[TRAIDATT],
TipoOperazioneConsLa BCVOUT[TRATOPRL],
ValutazioneInserita BCVOUT[TRAFVAL],
Cancellata BCVOUT[TRACANC],
IdLegamePresenza BCVOUT[TRAIDRP],
ControlloPresenza BCVOUT[TRACTP],
TipoRilevamentoTempo BCVOUT[TRATRT],
ChiusuraAutomatica BCVOUT[TRACHAU],
RiaperturaUltTransaz BCVOUT[TRARUT],
MinRitardoApertura BCVOUT[TRAMRA],
InseritaManualmente BCVOUT[TRAIMA],
WsInUso BCVOUT[TRAWS],
FirmaCreazData BCVOUT[TRACDAT&amp;],
FirmaCreazOra BCVOUT[TRACORA],
FirmaCreazStazione BCVOUT[TRACWS],
FirmaCreazOperatore BCVOUT[TRACOPE],
FirmaUltVarData BCVOUT[TRAVDAT&amp;],
FirmaUltVarOra BCVOUT[TRAVORA],
FirmaUltVarStazione BCVOUT[TRAVWS],
FirmaUltVarOperatore BCVOUT[TRAVOPE],
DesEstesa BCVOUT[TRATESTO]

from YPKTransazioni    
where    
YPKTransazioni.DBGruppo=BCVIN[GR$] and    
YPKTransazioni.CodiceRisorsaProd=BCVIN[[0.YPK_ERISPROD.RIPRACRISP$]]  
and YPKTransazioni.Stato=0 and YPKTransazioni.CodTipTransazione&lt;&gt;1  
and YPKTransazioni.Cancellata=0
order by YPKTransazioni.DataApertura,YPKTransazioni.OraApertura</Query>
					<FirmaUltVarData>2016-07-08</FirmaUltVarData>
					<FirmaUltVarOra>143810</FirmaUltVarOra>
					<FirmaUltVarStazione>CD</FirmaUltVarStazione>
					<FirmaUltVarOperatore>SCP</FirmaUltVarOperatore>
					<NumeroRigheBottoni>3</NumeroRigheBottoni>
					<NumeroColonneBottoni>3</NumeroColonneBottoni>
					<NomeStruttDinamica>YPK_TRAN</NomeStruttDinamica>
					<LabelBottoni>select 
isnull(dbo.pkGetRifOrdProdFase(BCVIN[GR$],[[TRAIDDOR]],[[TRAIDRORPF]],[[TRAIDDORF]]),&apos;no-rif-fase&apos;)+
&apos;\n&apos;+
&apos;Ore Lavorate: &apos;+dbo.pkFormatHours([[TRAOREL]])+&apos;\n&apos; + 
&apos;[[TRACART$]] &apos;+isnull((select DesArt from ArtAnagrafica where DBGruppo=BCVIN[GR$] and CodArt=&apos;[[TRACART$]]&apos;),&apos;no-rif-anag-art&apos;)

/*
*    Label Bottone
*    Data Apertura e Ore Lavorate
*    riferimento a fase ordine di lavorazione e descrizione articolo
*/</LabelBottoni>
					<TitoloVideata>Registrazioni</TitoloVideata>
					<TipoAzione>E</TipoAzione>
					<TipoAzioneSingola>E</TipoAzioneSingola>
					<TipoConferma>1</TipoConferma>
					<CancSelInEntrata>1</CancSelInEntrata>
					<CodiceEdit>E15</CodiceEdit>
					<ParametriEdit>&lt;?xml version=&quot;1.0&quot; encoding=&quot;ISO-8859-1&quot;?&gt;
&lt;Parametri&gt;
	&lt;Labels&gt;
		&lt;TitoloVideata&gt;Digitazione Ore su Fase&lt;/TitoloVideata&gt;
		&lt;LabelOre&gt;Ore [HH:MM]&lt;/LabelOre&gt;
	&lt;/Labels&gt;
	&lt;Ore&gt;
		&lt;Modalita&gt;2&lt;/Modalita&gt;
	&lt;/Ore&gt;
	&lt;CausaleAttivita&gt;
		&lt;Modalita&gt;2&lt;/Modalita&gt;
	&lt;/CausaleAttivita&gt;
	&lt;Note&gt;
		&lt;MostraNote&gt;1&lt;/MostraNote&gt;
	&lt;/Note&gt;
&lt;/Parametri&gt;</ParametriEdit>
					<CodiceConferma>C13</CodiceConferma>
					<CodiceCancel>A04</CodiceCancel>
					<CodiceQuery>DB</CodiceQuery>
					<CodiceEnable>N02</CodiceEnable>
				</Attivita>
				<Attivita>
					<CodPro>1402</CodPro>
					<Attivita>30</Attivita>
					<Des>CHIUSURA TRANSAZIONI</Des>
					<FirmaUltVarData>2016-07-08</FirmaUltVarData>
					<FirmaUltVarOra>143810</FirmaUltVarOra>
					<FirmaUltVarStazione>CD</FirmaUltVarStazione>
					<FirmaUltVarOperatore>SCP</FirmaUltVarOperatore>
					<TipoAttivita>4</TipoAttivita>
					<CodiceTrans>T02</CodiceTrans>
				</Attivita>
				<Attivita>
					<CodPro>1402</CodPro>
					<Attivita>35</Attivita>
					<Des>ESPORTAZIONE</Des>
					<FirmaUltVarData>2016-07-08</FirmaUltVarData>
					<FirmaUltVarOra>143810</FirmaUltVarOra>
					<FirmaUltVarStazione>CD</FirmaUltVarStazione>
					<FirmaUltVarOperatore>SCP</FirmaUltVarOperatore>
					<TipoAttivita>5</TipoAttivita>
					<CodiceExport>E01</CodiceExport>
					<PrefissoExport>AVP</PrefissoExport>
					<CartellaExpDati>PK\</CartellaExpDati>
				</Attivita>
			</ElencoAttivita>
		</Processo>
	</ElencoProcessi>
</Pickup>

